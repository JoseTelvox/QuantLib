\doxysection{ql/experimental/volatility/noarbsabr.hpp File Reference}
\hypertarget{noarbsabr_8hpp}{}\label{noarbsabr_8hpp}\index{ql/experimental/volatility/noarbsabr.hpp@{ql/experimental/volatility/noarbsabr.hpp}}


No-\/arbitrage SABR.  


{\ttfamily \#include $<$ql/qldefines.\+hpp$>$}\newline
{\ttfamily \#include $<$ql/types.\+hpp$>$}\newline
{\ttfamily \#include $<$ql/math/integrals/gausslobattointegral.\+hpp$>$}\newline
{\ttfamily \#include $<$vector$>$}\newline
\doxysubsubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{class_quant_lib_1_1_no_arb_sabr_model}{Quant\+Lib\+::\+No\+Arb\+Sabr\+Model}}
\item 
class \mbox{\hyperlink{class_quant_lib_1_1detail_1_1_d0_interpolator}{Quant\+Lib\+::detail\+::\+D0\+Interpolator}}
\end{DoxyCompactItemize}
\doxysubsubsection*{Namespaces}
\begin{DoxyCompactItemize}
\item 
namespace \mbox{\hyperlink{namespace_quant_lib}{Quant\+Lib}}
\item 
namespace \mbox{\hyperlink{namespace_quant_lib_1_1detail}{Quant\+Lib\+::detail}}
\end{DoxyCompactItemize}
\doxysubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{noarbsabr_8hpp_a28b7b120343542cf7c1896f3fa0f2ad5}\label{noarbsabr_8hpp_a28b7b120343542cf7c1896f3fa0f2ad5} 
const \mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}} {\bfseries Quant\+Lib\+::detail\+::\+No\+Arb\+Sabr\+Model\+::beta\+\_\+min} = 0.\+01
\item 
\Hypertarget{noarbsabr_8hpp_aa457c6759444d09b554710c725acee77}\label{noarbsabr_8hpp_aa457c6759444d09b554710c725acee77} 
const \mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}} {\bfseries Quant\+Lib\+::detail\+::\+No\+Arb\+Sabr\+Model\+::beta\+\_\+max} = 0.\+99
\item 
\Hypertarget{noarbsabr_8hpp_a9c92ea0708ad8de11975cf578cef09ba}\label{noarbsabr_8hpp_a9c92ea0708ad8de11975cf578cef09ba} 
const \mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}} {\bfseries Quant\+Lib\+::detail\+::\+No\+Arb\+Sabr\+Model\+::expiry\+Time\+\_\+max} = 30.\+0
\item 
\Hypertarget{noarbsabr_8hpp_aa7dd3badd8784e33d313f239c17edcec}\label{noarbsabr_8hpp_aa7dd3badd8784e33d313f239c17edcec} 
const \mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}} {\bfseries Quant\+Lib\+::detail\+::\+No\+Arb\+Sabr\+Model\+::sigma\+I\+\_\+min} = 0.\+05
\item 
\Hypertarget{noarbsabr_8hpp_aefa3097a9a9a5b8f4c5ef03221d28f8b}\label{noarbsabr_8hpp_aefa3097a9a9a5b8f4c5ef03221d28f8b} 
const \mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}} {\bfseries Quant\+Lib\+::detail\+::\+No\+Arb\+Sabr\+Model\+::sigma\+I\+\_\+max} = 1.\+00
\item 
\Hypertarget{noarbsabr_8hpp_a1f0761035e75b902135c08bccc4630d0}\label{noarbsabr_8hpp_a1f0761035e75b902135c08bccc4630d0} 
const \mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}} {\bfseries Quant\+Lib\+::detail\+::\+No\+Arb\+Sabr\+Model\+::nu\+\_\+min} = 0.\+01
\item 
\Hypertarget{noarbsabr_8hpp_a51d0f9ece051026d9d68bdfd55b07453}\label{noarbsabr_8hpp_a51d0f9ece051026d9d68bdfd55b07453} 
const \mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}} {\bfseries Quant\+Lib\+::detail\+::\+No\+Arb\+Sabr\+Model\+::nu\+\_\+max} = 0.\+80
\item 
\Hypertarget{noarbsabr_8hpp_a0d7f32170814afdade920dd290e7309c}\label{noarbsabr_8hpp_a0d7f32170814afdade920dd290e7309c} 
const \mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}} {\bfseries Quant\+Lib\+::detail\+::\+No\+Arb\+Sabr\+Model\+::rho\+\_\+min} = -\/0.\+99
\item 
\Hypertarget{noarbsabr_8hpp_abfd7b5d3672e653816d3dc3c10087d7b}\label{noarbsabr_8hpp_abfd7b5d3672e653816d3dc3c10087d7b} 
const \mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}} {\bfseries Quant\+Lib\+::detail\+::\+No\+Arb\+Sabr\+Model\+::rho\+\_\+max} = 0.\+99
\item 
\Hypertarget{noarbsabr_8hpp_a48875b80d0133a41da06bdc9381635d6}\label{noarbsabr_8hpp_a48875b80d0133a41da06bdc9381635d6} 
const \mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}} {\bfseries Quant\+Lib\+::detail\+::\+No\+Arb\+Sabr\+Model\+::phi\+By\+Tau\+\_\+cutoff} = 124.\+587
\item 
\Hypertarget{noarbsabr_8hpp_a9ddba42f82d9f2b56467f445ad78873c}\label{noarbsabr_8hpp_a9ddba42f82d9f2b56467f445ad78873c} 
const \mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}} {\bfseries Quant\+Lib\+::detail\+::\+No\+Arb\+Sabr\+Model\+::nsim} = 2500000.\+0
\item 
\Hypertarget{noarbsabr_8hpp_a68accb617f8ba9a514f1f5cc62205316}\label{noarbsabr_8hpp_a68accb617f8ba9a514f1f5cc62205316} 
const \mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}} {\bfseries Quant\+Lib\+::detail\+::\+No\+Arb\+Sabr\+Model\+::tiny\+\_\+prob} = 1E-\/5
\item 
\Hypertarget{noarbsabr_8hpp_a080479329fba05572cfc5073b4c42a90}\label{noarbsabr_8hpp_a080479329fba05572cfc5073b4c42a90} 
const \mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}} {\bfseries Quant\+Lib\+::detail\+::\+No\+Arb\+Sabr\+Model\+::strike\+\_\+min} = 1E-\/6
\item 
\Hypertarget{noarbsabr_8hpp_ae97701916fe5bc4867e6ab8529bf3915}\label{noarbsabr_8hpp_ae97701916fe5bc4867e6ab8529bf3915} 
const \mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}} {\bfseries Quant\+Lib\+::detail\+::\+No\+Arb\+Sabr\+Model\+::i\+\_\+accuracy} = 1E-\/7
\item 
\Hypertarget{noarbsabr_8hpp_a8e93ca89b946ca4ad85d524126c264c1}\label{noarbsabr_8hpp_a8e93ca89b946ca4ad85d524126c264c1} 
const \mbox{\hyperlink{namespace_quant_lib_af4cc4ef40b52c17cc455ead2a97aedb3}{Size}} {\bfseries Quant\+Lib\+::detail\+::\+No\+Arb\+Sabr\+Model\+::i\+\_\+max\+\_\+iterations} = 10000
\item 
\Hypertarget{noarbsabr_8hpp_a45ee2032f3b27ab34429cb6d9a5a0eed}\label{noarbsabr_8hpp_a45ee2032f3b27ab34429cb6d9a5a0eed} 
const \mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}} {\bfseries Quant\+Lib\+::detail\+::\+No\+Arb\+Sabr\+Model\+::forward\+\_\+accuracy} = 1E-\/6
\item 
\Hypertarget{noarbsabr_8hpp_a8b223501c95b4e22a72d1c2681264ff4}\label{noarbsabr_8hpp_a8b223501c95b4e22a72d1c2681264ff4} 
const \mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}} {\bfseries Quant\+Lib\+::detail\+::\+No\+Arb\+Sabr\+Model\+::forward\+\_\+search\+\_\+step} = 0.\+0010
\item 
\Hypertarget{noarbsabr_8hpp_a349ca3a19a09cf43f3035472186cee61}\label{noarbsabr_8hpp_a349ca3a19a09cf43f3035472186cee61} 
const \mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}} {\bfseries Quant\+Lib\+::detail\+::\+No\+Arb\+Sabr\+Model\+::density\+\_\+lower\+\_\+bound} = 1E-\/50
\item 
\Hypertarget{noarbsabr_8hpp_ab5faeee5f24a0b8da948049015748274}\label{noarbsabr_8hpp_ab5faeee5f24a0b8da948049015748274} 
const \mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}} {\bfseries Quant\+Lib\+::detail\+::\+No\+Arb\+Sabr\+Model\+::density\+\_\+threshold} = 1E-\/100
\item 
\Hypertarget{namespace_quant_lib_1_1detail_afa921c1b121f8fb97ec6a1d83c2e7dcb}\label{namespace_quant_lib_1_1detail_afa921c1b121f8fb97ec6a1d83c2e7dcb} 
const unsigned long {\bfseries Quant\+Lib\+::detail\+::sabrabsprob} \mbox{[}1209600\mbox{]}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
No-\/arbitrage SABR. 

Reference\+: Paul Doust, No-\/arbitrage SABR, The Journal of Computational Finance (3â€“31) Volume 15/\+Number 3, Spring 2012

The parameters are bounded as follows (see also below)

beta \mbox{[}0.\+01, 0.\+99\mbox{]} expiry\+Time (0.\+0, 30.\+0\mbox{]} sigmaI = alpha\texorpdfstring{$\ast$}{*}forward\texorpdfstring{$^\wedge$}{\string^}(beta-\/1) \mbox{[}0.\+05, 1.\+0\mbox{]} nu \mbox{[}0.\+0001, 0.\+8\mbox{]} rho \mbox{[}-\/0.\+99, 0.\+99\mbox{]}

As suggested in the paper, d0 is interpolated (linearly) in phi space. For beta \texorpdfstring{$>$}{>} 0.\+9 phi is extrapolated to a value corresponding to d0 = tiny\+\_\+prob = 1E-\/5 at beta = 1. For tau \texorpdfstring{$<$}{<} 0.\+25 phi is extrapolated flat. For rho outside \mbox{[}-\/0.\+75, 0.\+75\mbox{]} phi is extrapolated linearly.

There are some parameter sets that are admissable, yet do not allow for the adjustment procedure as suggested in the paper to force the model implied forward to the correct value. In this case, no adjustment is done, leading to a model implied forward different from the desired one. This situation can be identified by comparing forward() and numerical\+Forward(). 