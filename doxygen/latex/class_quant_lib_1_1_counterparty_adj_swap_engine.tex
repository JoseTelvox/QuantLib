\doxysection{Quant\+Lib\+::Counterparty\+Adj\+Swap\+Engine Class Reference}
\hypertarget{class_quant_lib_1_1_counterparty_adj_swap_engine}{}\label{class_quant_lib_1_1_counterparty_adj_swap_engine}\index{QuantLib::CounterpartyAdjSwapEngine@{QuantLib::CounterpartyAdjSwapEngine}}


{\ttfamily \#include $<$cvaswapengine.\+hpp$>$}

Inheritance diagram for Quant\+Lib\+::Counterparty\+Adj\+Swap\+Engine\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{class_quant_lib_1_1_counterparty_adj_swap_engine}
\end{center}
\end{figure}
\doxysubsubsection*{Constructors}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_quant_lib_1_1_counterparty_adj_swap_engine_af06f7b0cada58431d88497f109112285}{Counterparty\+Adj\+Swap\+Engine}} (const \mbox{\hyperlink{class_quant_lib_1_1_handle}{Handle}}$<$ \mbox{\hyperlink{class_quant_lib_1_1_yield_term_structure}{Yield\+Term\+Structure}} $>$ \&discount\+Curve, const \mbox{\hyperlink{class_quant_lib_1_1_handle}{Handle}}$<$ \mbox{\hyperlink{class_quant_lib_1_1_pricing_engine}{Pricing\+Engine}} $>$ \&swaption\+Engine, const \mbox{\hyperlink{class_quant_lib_1_1_handle}{Handle}}$<$ \mbox{\hyperlink{class_quant_lib_1_1_default_probability_term_structure}{Default\+Probability\+Term\+Structure}} $>$ \&ctpty\+DTS, \mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}} ctpty\+Recovery\+Rate, const \mbox{\hyperlink{class_quant_lib_1_1_handle}{Handle}}$<$ \mbox{\hyperlink{class_quant_lib_1_1_default_probability_term_structure}{Default\+Probability\+Term\+Structure}} $>$ \&invst\+DTS=\mbox{\hyperlink{class_quant_lib_1_1_handle}{Handle}}$<$ \mbox{\hyperlink{class_quant_lib_1_1_default_probability_term_structure}{Default\+Probability\+Term\+Structure}} $>$(), \mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}} invst\+Recovery\+Rate=0.\+999)
\item 
\mbox{\hyperlink{class_quant_lib_1_1_counterparty_adj_swap_engine_a1cd08102551d00439d4fe1110210efd5}{Counterparty\+Adj\+Swap\+Engine}} (const \mbox{\hyperlink{class_quant_lib_1_1_handle}{Handle}}$<$ \mbox{\hyperlink{class_quant_lib_1_1_yield_term_structure}{Yield\+Term\+Structure}} $>$ \&discount\+Curve, \mbox{\hyperlink{namespace_quant_lib_ae3abfa256de5aa2b506ab6bda014e4dc}{Volatility}} black\+Vol, const \mbox{\hyperlink{class_quant_lib_1_1_handle}{Handle}}$<$ \mbox{\hyperlink{class_quant_lib_1_1_default_probability_term_structure}{Default\+Probability\+Term\+Structure}} $>$ \&ctpty\+DTS, \mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}} ctpty\+Recovery\+Rate, const \mbox{\hyperlink{class_quant_lib_1_1_handle}{Handle}}$<$ \mbox{\hyperlink{class_quant_lib_1_1_default_probability_term_structure}{Default\+Probability\+Term\+Structure}} $>$ \&invst\+DTS=\mbox{\hyperlink{class_quant_lib_1_1_handle}{Handle}}$<$ \mbox{\hyperlink{class_quant_lib_1_1_default_probability_term_structure}{Default\+Probability\+Term\+Structure}} $>$(), \mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}} invst\+Recovery\+Rate=0.\+999)
\item 
\mbox{\hyperlink{class_quant_lib_1_1_counterparty_adj_swap_engine_a6ae2741f6f024ff28dfb66139551f45a}{Counterparty\+Adj\+Swap\+Engine}} (const \mbox{\hyperlink{class_quant_lib_1_1_handle}{Handle}}$<$ \mbox{\hyperlink{class_quant_lib_1_1_yield_term_structure}{Yield\+Term\+Structure}} $>$ \&discount\+Curve, const \mbox{\hyperlink{class_quant_lib_1_1_handle}{Handle}}$<$ \mbox{\hyperlink{class_quant_lib_1_1_quote}{Quote}} $>$ \&black\+Vol, const \mbox{\hyperlink{class_quant_lib_1_1_handle}{Handle}}$<$ \mbox{\hyperlink{class_quant_lib_1_1_default_probability_term_structure}{Default\+Probability\+Term\+Structure}} $>$ \&ctpty\+DTS, \mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}} ctpty\+Recovery\+Rate, const \mbox{\hyperlink{class_quant_lib_1_1_handle}{Handle}}$<$ \mbox{\hyperlink{class_quant_lib_1_1_default_probability_term_structure}{Default\+Probability\+Term\+Structure}} $>$ \&invst\+DTS=\mbox{\hyperlink{class_quant_lib_1_1_handle}{Handle}}$<$ \mbox{\hyperlink{class_quant_lib_1_1_default_probability_term_structure}{Default\+Probability\+Term\+Structure}} $>$(), \mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}} invst\+Recovery\+Rate=0.\+999)
\item 
\Hypertarget{class_quant_lib_1_1_counterparty_adj_swap_engine_a1b4015c86f56392381e6487d15c8a32b}\label{class_quant_lib_1_1_counterparty_adj_swap_engine_a1b4015c86f56392381e6487d15c8a32b} 
void {\bfseries calculate} () const override
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Bilateral (CVA and DVA) default adjusted vanilla swap pricing engine. Collateral is not considered. No wrong way risk is considered (rates and counterparty default are uncorrelated). Based on\+: Sorensen, E.\+H. and Bollier, T.\+F., Pricing swap default risk. Financial Analysts Journal, 1994, 50, 23â€“33 Also see sect. II-\/5 in\+: Risk Neutral Pricing of Counterparty Risk D. Brigo, M. Masetti, 2004 or in sections 3 and 4 of "{}\+A Formula for Interest Rate Swaps    Valuation under Counterparty Risk in presence of Netting Agreements"{} D. Brigo and M. Masetti; May 4, 2005

to do\+: Compute fair rate through iteration instead of the current approximation . to do\+: write \doxylink{class_quant_lib_1_1_issuer}{Issuer} based constructors (event type) to do\+: Check consistency between option engine discount and the one given 

\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{class_quant_lib_1_1_counterparty_adj_swap_engine_af06f7b0cada58431d88497f109112285}\index{QuantLib::CounterpartyAdjSwapEngine@{QuantLib::CounterpartyAdjSwapEngine}!CounterpartyAdjSwapEngine@{CounterpartyAdjSwapEngine}}
\index{CounterpartyAdjSwapEngine@{CounterpartyAdjSwapEngine}!QuantLib::CounterpartyAdjSwapEngine@{QuantLib::CounterpartyAdjSwapEngine}}
\doxysubsubsection{\texorpdfstring{CounterpartyAdjSwapEngine()}{CounterpartyAdjSwapEngine()}\hspace{0.1cm}{\footnotesize\ttfamily [1/3]}}
{\footnotesize\ttfamily \label{class_quant_lib_1_1_counterparty_adj_swap_engine_af06f7b0cada58431d88497f109112285} 
Quant\+Lib\+::\+Counterparty\+Adj\+Swap\+Engine\+::\+Counterparty\+Adj\+Swap\+Engine (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_quant_lib_1_1_handle}{Handle}}$<$ \mbox{\hyperlink{class_quant_lib_1_1_yield_term_structure}{Yield\+Term\+Structure}} $>$ \&}]{discount\+Curve}{, }\item[{const \mbox{\hyperlink{class_quant_lib_1_1_handle}{Handle}}$<$ \mbox{\hyperlink{class_quant_lib_1_1_pricing_engine}{Pricing\+Engine}} $>$ \&}]{swaption\+Engine}{, }\item[{const \mbox{\hyperlink{class_quant_lib_1_1_handle}{Handle}}$<$ \mbox{\hyperlink{class_quant_lib_1_1_default_probability_term_structure}{Default\+Probability\+Term\+Structure}} $>$ \&}]{ctpty\+DTS}{, }\item[{\mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}}}]{ctpty\+Recovery\+Rate}{, }\item[{const \mbox{\hyperlink{class_quant_lib_1_1_handle}{Handle}}$<$ \mbox{\hyperlink{class_quant_lib_1_1_default_probability_term_structure}{Default\+Probability\+Term\+Structure}} $>$ \&}]{invst\+DTS}{ = {\ttfamily \mbox{\hyperlink{class_quant_lib_1_1_handle}{Handle}}$<$\mbox{\hyperlink{class_quant_lib_1_1_default_probability_term_structure}{Default\+Probability\+Term\+Structure}}$>$()}, }\item[{\mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}}}]{invst\+Recovery\+Rate}{ = {\ttfamily 0.999}}\end{DoxyParamCaption})}

Creates the engine from an arbitrary swaption engine. If the investor default model is not given a default free one is assumed. 
\begin{DoxyParams}{Parameters}
{\em discount\+Curve} & Used in pricing. \\
\hline
{\em swaption\+Engine} & Determines the volatility and thus the exposure model. \\
\hline
{\em ctpty\+DTS} & Counterparty default curve. \\
\hline
{\em ctpty\+Recovery\+Rate} & Counterparty recovey rate. \\
\hline
{\em invst\+DTS} & Investor (swap holder) default curve. \\
\hline
{\em invst\+Recovery\+Rate} & Investor recovery rate. \\
\hline
\end{DoxyParams}
\Hypertarget{class_quant_lib_1_1_counterparty_adj_swap_engine_a1cd08102551d00439d4fe1110210efd5}\index{QuantLib::CounterpartyAdjSwapEngine@{QuantLib::CounterpartyAdjSwapEngine}!CounterpartyAdjSwapEngine@{CounterpartyAdjSwapEngine}}
\index{CounterpartyAdjSwapEngine@{CounterpartyAdjSwapEngine}!QuantLib::CounterpartyAdjSwapEngine@{QuantLib::CounterpartyAdjSwapEngine}}
\doxysubsubsection{\texorpdfstring{CounterpartyAdjSwapEngine()}{CounterpartyAdjSwapEngine()}\hspace{0.1cm}{\footnotesize\ttfamily [2/3]}}
{\footnotesize\ttfamily \label{class_quant_lib_1_1_counterparty_adj_swap_engine_a1cd08102551d00439d4fe1110210efd5} 
Quant\+Lib\+::\+Counterparty\+Adj\+Swap\+Engine\+::\+Counterparty\+Adj\+Swap\+Engine (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_quant_lib_1_1_handle}{Handle}}$<$ \mbox{\hyperlink{class_quant_lib_1_1_yield_term_structure}{Yield\+Term\+Structure}} $>$ \&}]{discount\+Curve}{, }\item[{\mbox{\hyperlink{namespace_quant_lib_ae3abfa256de5aa2b506ab6bda014e4dc}{Volatility}}}]{black\+Vol}{, }\item[{const \mbox{\hyperlink{class_quant_lib_1_1_handle}{Handle}}$<$ \mbox{\hyperlink{class_quant_lib_1_1_default_probability_term_structure}{Default\+Probability\+Term\+Structure}} $>$ \&}]{ctpty\+DTS}{, }\item[{\mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}}}]{ctpty\+Recovery\+Rate}{, }\item[{const \mbox{\hyperlink{class_quant_lib_1_1_handle}{Handle}}$<$ \mbox{\hyperlink{class_quant_lib_1_1_default_probability_term_structure}{Default\+Probability\+Term\+Structure}} $>$ \&}]{invst\+DTS}{ = {\ttfamily \mbox{\hyperlink{class_quant_lib_1_1_handle}{Handle}}$<$\mbox{\hyperlink{class_quant_lib_1_1_default_probability_term_structure}{Default\+Probability\+Term\+Structure}}$>$()}, }\item[{\mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}}}]{invst\+Recovery\+Rate}{ = {\ttfamily 0.999}}\end{DoxyParamCaption})}

Creates an engine with a black volatility model for the exposure. If the investor default model is not given a default free one is assumed. 
\begin{DoxyParams}{Parameters}
{\em discount\+Curve} & Used in pricing. \\
\hline
{\em black\+Vol} & Black volatility used in the exposure model. \\
\hline
{\em ctpty\+DTS} & Counterparty default curve. \\
\hline
{\em ctpty\+Recovery\+Rate} & Counterparty recovey rate. \\
\hline
{\em invst\+DTS} & Investor (swap holder) default curve. \\
\hline
{\em invst\+Recovery\+Rate} & Investor recovery rate. \\
\hline
\end{DoxyParams}
\Hypertarget{class_quant_lib_1_1_counterparty_adj_swap_engine_a6ae2741f6f024ff28dfb66139551f45a}\index{QuantLib::CounterpartyAdjSwapEngine@{QuantLib::CounterpartyAdjSwapEngine}!CounterpartyAdjSwapEngine@{CounterpartyAdjSwapEngine}}
\index{CounterpartyAdjSwapEngine@{CounterpartyAdjSwapEngine}!QuantLib::CounterpartyAdjSwapEngine@{QuantLib::CounterpartyAdjSwapEngine}}
\doxysubsubsection{\texorpdfstring{CounterpartyAdjSwapEngine()}{CounterpartyAdjSwapEngine()}\hspace{0.1cm}{\footnotesize\ttfamily [3/3]}}
{\footnotesize\ttfamily \label{class_quant_lib_1_1_counterparty_adj_swap_engine_a6ae2741f6f024ff28dfb66139551f45a} 
Quant\+Lib\+::\+Counterparty\+Adj\+Swap\+Engine\+::\+Counterparty\+Adj\+Swap\+Engine (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_quant_lib_1_1_handle}{Handle}}$<$ \mbox{\hyperlink{class_quant_lib_1_1_yield_term_structure}{Yield\+Term\+Structure}} $>$ \&}]{discount\+Curve}{, }\item[{const \mbox{\hyperlink{class_quant_lib_1_1_handle}{Handle}}$<$ \mbox{\hyperlink{class_quant_lib_1_1_quote}{Quote}} $>$ \&}]{black\+Vol}{, }\item[{const \mbox{\hyperlink{class_quant_lib_1_1_handle}{Handle}}$<$ \mbox{\hyperlink{class_quant_lib_1_1_default_probability_term_structure}{Default\+Probability\+Term\+Structure}} $>$ \&}]{ctpty\+DTS}{, }\item[{\mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}}}]{ctpty\+Recovery\+Rate}{, }\item[{const \mbox{\hyperlink{class_quant_lib_1_1_handle}{Handle}}$<$ \mbox{\hyperlink{class_quant_lib_1_1_default_probability_term_structure}{Default\+Probability\+Term\+Structure}} $>$ \&}]{invst\+DTS}{ = {\ttfamily \mbox{\hyperlink{class_quant_lib_1_1_handle}{Handle}}$<$\mbox{\hyperlink{class_quant_lib_1_1_default_probability_term_structure}{Default\+Probability\+Term\+Structure}}$>$()}, }\item[{\mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}}}]{invst\+Recovery\+Rate}{ = {\ttfamily 0.999}}\end{DoxyParamCaption})}

Creates an engine with a black volatility model for the exposure. The volatility is given as a quote. If the investor default model is not given a default free one is assumed. 
\begin{DoxyParams}{Parameters}
{\em discount\+Curve} & Used in pricing. \\
\hline
{\em black\+Vol} & Black volatility used in the exposure model. \\
\hline
{\em ctpty\+DTS} & Counterparty default curve. \\
\hline
{\em ctpty\+Recovery\+Rate} & Counterparty recovey rate. \\
\hline
{\em invst\+DTS} & Investor (swap holder) default curve. \\
\hline
{\em invst\+Recovery\+Rate} & Investor recovery rate. \\
\hline
\end{DoxyParams}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
ql/pricingengines/swap/cvaswapengine.\+hpp\item 
ql/pricingengines/swap/cvaswapengine.\+cpp\end{DoxyCompactItemize}
