\doxysection{Quant\+Lib\+::One\+Factor\+Copula Class Reference}
\hypertarget{class_quant_lib_1_1_one_factor_copula}{}\label{class_quant_lib_1_1_one_factor_copula}\index{QuantLib::OneFactorCopula@{QuantLib::OneFactorCopula}}


Abstract base class for one-\/factor copula models.  




{\ttfamily \#include $<$onefactorcopula.\+hpp$>$}

Inheritance diagram for Quant\+Lib\+::One\+Factor\+Copula\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.058824cm]{class_quant_lib_1_1_one_factor_copula}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{class_quant_lib_1_1_one_factor_copula_a097679ac888315c7bffb9fece9819333}\label{class_quant_lib_1_1_one_factor_copula_a097679ac888315c7bffb9fece9819333} 
{\bfseries One\+Factor\+Copula} (\mbox{\hyperlink{class_quant_lib_1_1_handle}{Handle}}$<$ \mbox{\hyperlink{class_quant_lib_1_1_quote}{Quote}} $>$ \mbox{\hyperlink{class_quant_lib_1_1_one_factor_copula_ac301719aca4fdb8a93289d0e7f72352c}{correlation}}, \mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}} maximum=5.\+0, \mbox{\hyperlink{namespace_quant_lib_af4cc4ef40b52c17cc455ead2a97aedb3}{Size}} integration\+Steps=50, \mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}} minimum=-\/5.\+0)
\item 
virtual \mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}} \mbox{\hyperlink{class_quant_lib_1_1_one_factor_copula_a474a5f6157375532d09d92b0e8f1b593}{density}} (\mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}} m) const =0
\begin{DoxyCompactList}\small\item\em Density function of M. \end{DoxyCompactList}\item 
virtual \mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}} \mbox{\hyperlink{class_quant_lib_1_1_one_factor_copula_a0b3c619ab0979cb073ed3013abcfe8b4}{cumulativeZ}} (\mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}} z) const =0
\begin{DoxyCompactList}\small\item\em Cumulative distribution of Z. \end{DoxyCompactList}\item 
virtual \mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}} \mbox{\hyperlink{class_quant_lib_1_1_one_factor_copula_aa8f26b08b68d15a7a913ce40d4ff7966}{cumulativeY}} (\mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}} y) const
\begin{DoxyCompactList}\small\item\em Cumulative distribution of Y. \end{DoxyCompactList}\item 
virtual \mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}} \mbox{\hyperlink{class_quant_lib_1_1_one_factor_copula_a879f82a318fd4f0ec81c9577bcefbba6}{inverse\+CumulativeY}} (\mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}} p) const
\begin{DoxyCompactList}\small\item\em Inverse cumulative distribution of Y. \end{DoxyCompactList}\item 
\Hypertarget{class_quant_lib_1_1_one_factor_copula_ac301719aca4fdb8a93289d0e7f72352c}\label{class_quant_lib_1_1_one_factor_copula_ac301719aca4fdb8a93289d0e7f72352c} 
\mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}} {\bfseries correlation} () const
\begin{DoxyCompactList}\small\item\em Single correlation parameter. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}} \mbox{\hyperlink{class_quant_lib_1_1_one_factor_copula_a5cc67b81212f5af145a571784b3e61d6}{conditional\+Probability}} (\mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}} prob, \mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}} m) const
\begin{DoxyCompactList}\small\item\em Conditional probability. \end{DoxyCompactList}\item 
std\+::vector$<$ \mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}} $>$ \mbox{\hyperlink{class_quant_lib_1_1_one_factor_copula_a5c4aa1a82789813fcd245b7b38f6c344}{conditional\+Probability}} (const std\+::vector$<$ \mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}} $>$ \&prob, \mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}} m) const
\begin{DoxyCompactList}\small\item\em Vector of conditional probabilities. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}} \mbox{\hyperlink{class_quant_lib_1_1_one_factor_copula_a477e0493a6093f497064855008c80dab}{integral}} (\mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}} p) const
\item 
{\footnotesize template$<$class F$>$ }\\\mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}} \mbox{\hyperlink{class_quant_lib_1_1_one_factor_copula_adc149153ced991bba4cb716c2bb42327}{integral}} (const F \&f, std\+::vector$<$ \mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}} $>$ \&probabilities) const
\item 
{\footnotesize template$<$class F$>$ }\\\mbox{\hyperlink{class_quant_lib_1_1_distribution}{Distribution}} \mbox{\hyperlink{class_quant_lib_1_1_one_factor_copula_a1e25b1a30d63904c85de847228e51614}{integral}} (const F \&f, const std\+::vector$<$ \mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}} $>$ \&nominals, const std\+::vector$<$ \mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}} $>$ \&probabilities) const
\item 
int \mbox{\hyperlink{class_quant_lib_1_1_one_factor_copula_a39040bcfa07eb134ab4a051a6e6a614b}{check\+Moments}} (\mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}} tolerance) const
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions inherited from \mbox{\hyperlink{class_quant_lib_1_1_lazy_object}{Quant\+Lib\+::\+Lazy\+Object}}}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_quant_lib_1_1_lazy_object_adee2bf49be5c4c78736be293321a856d}{update}} () override
\item 
bool \mbox{\hyperlink{class_quant_lib_1_1_lazy_object_a0a7c5d42815a4e16ee2158e24dbfc748}{is\+Calculated}} () const
\end{DoxyCompactItemize}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_quant_lib_1_1_lazy_object_afac6ee19c3107c453e1347dd8000e023}{forward\+First\+Notification\+Only}} ()
\end{DoxyCompactItemize}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_quant_lib_1_1_lazy_object_a17c9433135a259e4776baec66204a484}{always\+Forward\+Notifications}} ()
\end{DoxyCompactItemize}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_quant_lib_1_1_lazy_object_a70c9b24e50132408d8d9ce4f6674662a}{recalculate}} ()
\end{DoxyCompactItemize}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_quant_lib_1_1_lazy_object_a7157f41e83f2c5d924f5c5bafda04d1d}{freeze}} ()
\end{DoxyCompactItemize}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_quant_lib_1_1_lazy_object_a2e0e4786666453024b9d4e0761f2770b}{unfreeze}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions inherited from \mbox{\hyperlink{class_quant_lib_1_1_observable}{Quant\+Lib\+::\+Observable}}}
\begin{DoxyCompactItemize}
\item 
{\bfseries Observable} (const \mbox{\hyperlink{class_quant_lib_1_1_observable}{Observable}} \&)
\item 
\mbox{\hyperlink{class_quant_lib_1_1_observable}{Observable}} \& \mbox{\hyperlink{class_quant_lib_1_1_observable_ad1e086da62f05b4bc5eafa698ef6fbc3}{operator=}} (const \mbox{\hyperlink{class_quant_lib_1_1_observable}{Observable}} \&)
\item 
{\bfseries Observable} (\mbox{\hyperlink{class_quant_lib_1_1_observable}{Observable}} \&\&)=delete
\item 
\mbox{\hyperlink{class_quant_lib_1_1_observable}{Observable}} \& {\bfseries operator=} (\mbox{\hyperlink{class_quant_lib_1_1_observable}{Observable}} \&\&)=delete
\item 
void \mbox{\hyperlink{class_quant_lib_1_1_observable_afb67478418efdb94382ac9d7ae904b94}{notify\+Observers}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions inherited from \mbox{\hyperlink{class_quant_lib_1_1_observer}{Quant\+Lib\+::\+Observer}}}
\begin{DoxyCompactItemize}
\item 
{\bfseries Observer} (const \mbox{\hyperlink{class_quant_lib_1_1_observer}{Observer}} \&)
\item 
\mbox{\hyperlink{class_quant_lib_1_1_observer}{Observer}} \& {\bfseries operator=} (const \mbox{\hyperlink{class_quant_lib_1_1_observer}{Observer}} \&)
\item 
std\+::pair$<$ iterator, bool $>$ {\bfseries register\+With} (const ext\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{class_quant_lib_1_1_observable}{Observable}} $>$ \&)
\item 
void \mbox{\hyperlink{class_quant_lib_1_1_observer_a338928c4fe626f9ccf0b98ceb318853a}{register\+With\+Observables}} (const ext\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{class_quant_lib_1_1_observer}{Observer}} $>$ \&)
\item 
\mbox{\hyperlink{namespace_quant_lib_af4cc4ef40b52c17cc455ead2a97aedb3}{Size}} {\bfseries unregister\+With} (const ext\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{class_quant_lib_1_1_observable}{Observable}} $>$ \&)
\item 
void {\bfseries unregister\+With\+All} ()
\item 
virtual void \mbox{\hyperlink{class_quant_lib_1_1_observer_acfbf794db3e7d5cfdea2cd517a195183}{deep\+Update}} ()
\end{DoxyCompactItemize}
\doxysubsubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{class_quant_lib_1_1_one_factor_copula_a8dd3a2685f5376c82f5766ae86e4550f}\label{class_quant_lib_1_1_one_factor_copula_a8dd3a2685f5376c82f5766ae86e4550f} 
\mbox{\hyperlink{namespace_quant_lib_af4cc4ef40b52c17cc455ead2a97aedb3}{Size}} {\bfseries steps} () const
\item 
\Hypertarget{class_quant_lib_1_1_one_factor_copula_adf63c91c75b67642f308c5dfe1cad711}\label{class_quant_lib_1_1_one_factor_copula_adf63c91c75b67642f308c5dfe1cad711} 
\mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}} {\bfseries dm} (\mbox{\hyperlink{namespace_quant_lib_af4cc4ef40b52c17cc455ead2a97aedb3}{Size}} i) const
\item 
\Hypertarget{class_quant_lib_1_1_one_factor_copula_a726fccd0904e76ba737588d2e9d631f3}\label{class_quant_lib_1_1_one_factor_copula_a726fccd0904e76ba737588d2e9d631f3} 
\mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}} {\bfseries m} (\mbox{\hyperlink{namespace_quant_lib_af4cc4ef40b52c17cc455ead2a97aedb3}{Size}} i) const
\item 
\Hypertarget{class_quant_lib_1_1_one_factor_copula_a4823fe1581fba1288762776ba2a3c757}\label{class_quant_lib_1_1_one_factor_copula_a4823fe1581fba1288762776ba2a3c757} 
\mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}} {\bfseries densitydm} (\mbox{\hyperlink{namespace_quant_lib_af4cc4ef40b52c17cc455ead2a97aedb3}{Size}} i) const
\end{DoxyCompactItemize}
\begin{DoxyCompactItemize}
\item 
virtual void \mbox{\hyperlink{class_quant_lib_1_1_lazy_object_a5244c7f83592375a0ea9048296435fd1}{calculate}} () const
\end{DoxyCompactItemize}
\begin{DoxyCompactItemize}
\item 
virtual void \mbox{\hyperlink{class_quant_lib_1_1_lazy_object_aafa5583a3743d9f93fa40da5b62e1ff8}{perform\+Calculations}} () const =0
\end{DoxyCompactItemize}
\doxysubsubsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{class_quant_lib_1_1_one_factor_copula_a18d42174650383ffc5fc3d9750ed2f1a}\label{class_quant_lib_1_1_one_factor_copula_a18d42174650383ffc5fc3d9750ed2f1a} 
\mbox{\hyperlink{class_quant_lib_1_1_handle}{Handle}}$<$ \mbox{\hyperlink{class_quant_lib_1_1_quote}{Quote}} $>$ {\bfseries correlation\+\_\+}
\item 
\Hypertarget{class_quant_lib_1_1_one_factor_copula_a45d8cdfbd65e7f01a5cf54bd35570671}\label{class_quant_lib_1_1_one_factor_copula_a45d8cdfbd65e7f01a5cf54bd35570671} 
\mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}} {\bfseries max\+\_\+}
\item 
\Hypertarget{class_quant_lib_1_1_one_factor_copula_a7933ff8bd857233ec5052673c2c2e8fe}\label{class_quant_lib_1_1_one_factor_copula_a7933ff8bd857233ec5052673c2c2e8fe} 
\mbox{\hyperlink{namespace_quant_lib_af4cc4ef40b52c17cc455ead2a97aedb3}{Size}} {\bfseries steps\+\_\+}
\item 
\Hypertarget{class_quant_lib_1_1_one_factor_copula_ace40265dfc5d21e58fa56e50554ae449}\label{class_quant_lib_1_1_one_factor_copula_ace40265dfc5d21e58fa56e50554ae449} 
\mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}} {\bfseries min\+\_\+}
\item 
\Hypertarget{class_quant_lib_1_1_one_factor_copula_a2747fbaaf34af9e4b4f34ea2a85d00e0}\label{class_quant_lib_1_1_one_factor_copula_a2747fbaaf34af9e4b4f34ea2a85d00e0} 
std\+::vector$<$ \mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}} $>$ {\bfseries y\+\_\+}
\item 
\Hypertarget{class_quant_lib_1_1_one_factor_copula_a2f83e654c64ef9b61ac9c288fb00b2d9}\label{class_quant_lib_1_1_one_factor_copula_a2f83e654c64ef9b61ac9c288fb00b2d9} 
std\+::vector$<$ \mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}} $>$ {\bfseries cumulative\+Y\+\_\+}
\end{DoxyCompactItemize}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{class_quant_lib_1_1_lazy_object_a58b4986a80efa18634483a92c121e26e}\label{class_quant_lib_1_1_lazy_object_a58b4986a80efa18634483a92c121e26e} 
bool {\bfseries calculated\+\_\+} = false
\end{DoxyCompactItemize}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{class_quant_lib_1_1_lazy_object_a7bb721fe00c6854e602758aba629ab77}\label{class_quant_lib_1_1_lazy_object_a7bb721fe00c6854e602758aba629ab77} 
bool {\bfseries frozen\+\_\+} = false
\end{DoxyCompactItemize}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{class_quant_lib_1_1_lazy_object_a02070ea7442d30625992c1711030d4b8}\label{class_quant_lib_1_1_lazy_object_a02070ea7442d30625992c1711030d4b8} 
bool {\bfseries always\+Forward\+\_\+}
\end{DoxyCompactItemize}
\doxysubsubsection*{Additional Inherited Members}
\doxysubsection*{Public Types inherited from \mbox{\hyperlink{class_quant_lib_1_1_observer}{Quant\+Lib\+::\+Observer}}}
\begin{DoxyCompactItemize}
\item 
typedef set\+\_\+type\+::iterator {\bfseries iterator}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Abstract base class for one-\/factor copula models. 

Reference\+: John Hull and Alan White, The Perfect Copula, June 2006

Let $Q_i(t)$ be the cumulative probability of default of counterparty i before time t.

In a one-\/factor model, consider random variables \[ Y_i = a_i\,M+\sqrt{1-a_i^2}\:Z_i \] where $M$ and $Z_i$ have independent zero-\/mean unit-\/variance distributions and $-1\leq a_i \leq 1$. The correlation between $Y_i$ and $Y_j$ is then $a_i a_j$.

Let $F_Y(y)$ be the cumulative distribution function of $Y_i$. $y$ is mapped to $t$ such that percentiles match, i.\+e. $F_Y(y)=Q_i(t)$ or $y=F_Y^{-1}(Q_i(t))$.

Now let $F_Z(z)$ be the cumulated distribution function of $Z_i$. For given realization of $M$, this determines the distribution of $y$\+:         \[Prob \,(Y_i < y|M) = F_Z \left( \frac{y-a_i\,M}{\sqrt{1-a_i^2}}\right)
\qquad
\mbox{or}
\qquad
Prob \,(t_i < t|M) = F_Z \left( \frac{F_Y^{-1}(Q_i(t))-a_i\,M}
{\sqrt{1-a_i^2}}
\right)
\]

The distribution functions of $ M, Z_i $ are specified in derived classes. The distribution function of $ Y $ is then given by the convolution           \[F_Y(y) = Prob\,(Y<y) = \int_{-\infty}^\infty\,\int_{-\infty}^{\infty}\:
D_Z(z)\,D_M(m) \quad
\Theta \left(y - a\,m - \sqrt{1-a^2}\,z\right)\,dm\,dz,
\qquad
\Theta (x) = \left\{
\begin{array}{ll}
1 & x \geq 0 \\
0 & x < 0
\end{array}\right.
\] where $ D_Z(z) $ and $ D_M(m) $ are the probability densities of $ Z$ and $ M, $ respectively.

This convolution can also be written      \[F(y) = Prob \,(Y < y) =
\int_{-\infty}^\infty D_M(m)\,dm\:
\int_{-\infty}^{g(y,a,m)} D_Z(z)\,dz, \qquad
g(y,a,m) = \frac{y - a\cdot m}{\sqrt{1-a^2}}, \qquad a < 1
\]

or

\[F(y) = Prob \,(Y < y) =
\int_{-\infty}^\infty D_Z(z)\,dz\:
\int_{-\infty}^{h(y,a,z)} D_M(m)\,dm, \qquad
h(y,a,z) = \frac{y - \sqrt{1 - a^2}\cdot z}{a}, \qquad a > 0.
\]

In general, $ F_Y(y) $ needs to be computed numerically.

\begin{DoxyRefDesc}{Todo}
\item[\mbox{\hyperlink{todo__todo000016}{Todo}}]Improve on simple Euler integration \end{DoxyRefDesc}


\doxysubsection{Member Function Documentation}
\Hypertarget{class_quant_lib_1_1_one_factor_copula_a39040bcfa07eb134ab4a051a6e6a614b}\index{QuantLib::OneFactorCopula@{QuantLib::OneFactorCopula}!checkMoments@{checkMoments}}
\index{checkMoments@{checkMoments}!QuantLib::OneFactorCopula@{QuantLib::OneFactorCopula}}
\doxysubsubsection{\texorpdfstring{checkMoments()}{checkMoments()}}
{\footnotesize\ttfamily \label{class_quant_lib_1_1_one_factor_copula_a39040bcfa07eb134ab4a051a6e6a614b} 
int Quant\+Lib\+::\+One\+Factor\+Copula\+::check\+Moments (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}}}]{tolerance}{}\end{DoxyParamCaption}) const}

Check moments (unit norm, zero mean and unit variance) of the distributions of M, Z, and Y by numerically integrating the respective density. \doxylink{class_quant_lib_1_1_parameter}{Parameter} tolerance is the maximum tolerable absolute error. \Hypertarget{class_quant_lib_1_1_one_factor_copula_a5c4aa1a82789813fcd245b7b38f6c344}\index{QuantLib::OneFactorCopula@{QuantLib::OneFactorCopula}!conditionalProbability@{conditionalProbability}}
\index{conditionalProbability@{conditionalProbability}!QuantLib::OneFactorCopula@{QuantLib::OneFactorCopula}}
\doxysubsubsection{\texorpdfstring{conditionalProbability()}{conditionalProbability()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \label{class_quant_lib_1_1_one_factor_copula_a5c4aa1a82789813fcd245b7b38f6c344} 
std\+::vector$<$ \mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}} $>$ Quant\+Lib\+::\+One\+Factor\+Copula\+::conditional\+Probability (\begin{DoxyParamCaption}\item[{const std\+::vector$<$ \mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}} $>$ \&}]{prob}{, }\item[{\mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}}}]{m}{}\end{DoxyParamCaption}) const}



Vector of conditional probabilities. 

\[\hat p_i(m) = F_Z \left( \frac{F_Y^{-1}(p_i)-a\,m}{\sqrt{1-a^2}}
\right)
\] \Hypertarget{class_quant_lib_1_1_one_factor_copula_a5cc67b81212f5af145a571784b3e61d6}\index{QuantLib::OneFactorCopula@{QuantLib::OneFactorCopula}!conditionalProbability@{conditionalProbability}}
\index{conditionalProbability@{conditionalProbability}!QuantLib::OneFactorCopula@{QuantLib::OneFactorCopula}}
\doxysubsubsection{\texorpdfstring{conditionalProbability()}{conditionalProbability()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \label{class_quant_lib_1_1_one_factor_copula_a5cc67b81212f5af145a571784b3e61d6} 
\mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}} Quant\+Lib\+::\+One\+Factor\+Copula\+::conditional\+Probability (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}}}]{prob}{, }\item[{\mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}}}]{m}{}\end{DoxyParamCaption}) const}



Conditional probability. 

\[\hat p(m) = F_Z \left( \frac{F_Y^{-1}(p)-a\,m}{\sqrt{1-a^2}}\right)
\] \Hypertarget{class_quant_lib_1_1_one_factor_copula_aa8f26b08b68d15a7a913ce40d4ff7966}\index{QuantLib::OneFactorCopula@{QuantLib::OneFactorCopula}!cumulativeY@{cumulativeY}}
\index{cumulativeY@{cumulativeY}!QuantLib::OneFactorCopula@{QuantLib::OneFactorCopula}}
\doxysubsubsection{\texorpdfstring{cumulativeY()}{cumulativeY()}}
{\footnotesize\ttfamily \label{class_quant_lib_1_1_one_factor_copula_aa8f26b08b68d15a7a913ce40d4ff7966} 
\mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}} Quant\+Lib\+::\+One\+Factor\+Copula\+::cumulativeY (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}}}]{y}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [virtual]}}



Cumulative distribution of Y. 

This is the default implementation based on tabulated data. The table needs to be filled by derived classes. If analytic calculation is feasible, this method can also be overridden. 

Reimplemented in \mbox{\hyperlink{class_quant_lib_1_1_one_factor_gaussian_copula_a9b2dde17f596b56f6a9b9860ad679eaa}{Quant\+Lib\+::\+One\+Factor\+Gaussian\+Copula}}.

\Hypertarget{class_quant_lib_1_1_one_factor_copula_a0b3c619ab0979cb073ed3013abcfe8b4}\index{QuantLib::OneFactorCopula@{QuantLib::OneFactorCopula}!cumulativeZ@{cumulativeZ}}
\index{cumulativeZ@{cumulativeZ}!QuantLib::OneFactorCopula@{QuantLib::OneFactorCopula}}
\doxysubsubsection{\texorpdfstring{cumulativeZ()}{cumulativeZ()}}
{\footnotesize\ttfamily \label{class_quant_lib_1_1_one_factor_copula_a0b3c619ab0979cb073ed3013abcfe8b4} 
virtual \mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}} Quant\+Lib\+::\+One\+Factor\+Copula\+::cumulativeZ (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}}}]{z}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [pure virtual]}}



Cumulative distribution of Z. 

Derived classes must override this method and ensure zero mean and unit variance. 

Implemented in \mbox{\hyperlink{class_quant_lib_1_1_one_factor_gaussian_copula_af2cf0e9ef4f8d3500a4735e98f8d0b38}{Quant\+Lib\+::\+One\+Factor\+Gaussian\+Copula}}, \mbox{\hyperlink{class_quant_lib_1_1_one_factor_gaussian_student_copula_a1d2c07a65a20743fe60527c92d650464}{Quant\+Lib\+::\+One\+Factor\+Gaussian\+Student\+Copula}}, \mbox{\hyperlink{class_quant_lib_1_1_one_factor_student_copula_a7131a55618fe22c7119b00bc64c26580}{Quant\+Lib\+::\+One\+Factor\+Student\+Copula}}, and \mbox{\hyperlink{class_quant_lib_1_1_one_factor_student_gaussian_copula_a92da6877e677e43d90fab623595d2331}{Quant\+Lib\+::\+One\+Factor\+Student\+Gaussian\+Copula}}.

\Hypertarget{class_quant_lib_1_1_one_factor_copula_a474a5f6157375532d09d92b0e8f1b593}\index{QuantLib::OneFactorCopula@{QuantLib::OneFactorCopula}!density@{density}}
\index{density@{density}!QuantLib::OneFactorCopula@{QuantLib::OneFactorCopula}}
\doxysubsubsection{\texorpdfstring{density()}{density()}}
{\footnotesize\ttfamily \label{class_quant_lib_1_1_one_factor_copula_a474a5f6157375532d09d92b0e8f1b593} 
virtual \mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}} Quant\+Lib\+::\+One\+Factor\+Copula\+::density (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}}}]{m}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [pure virtual]}}



Density function of M. 

Derived classes must override this method and ensure zero mean and unit variance. 

Implemented in \mbox{\hyperlink{class_quant_lib_1_1_one_factor_gaussian_copula_ad7ff34d5501309b51c28d097fbd48d67}{Quant\+Lib\+::\+One\+Factor\+Gaussian\+Copula}}, \mbox{\hyperlink{class_quant_lib_1_1_one_factor_gaussian_student_copula_a7f000484e4190f354b11794fa6321ee9}{Quant\+Lib\+::\+One\+Factor\+Gaussian\+Student\+Copula}}, \mbox{\hyperlink{class_quant_lib_1_1_one_factor_student_copula_a2880f4a7940afc208fdb2f57565c1c9b}{Quant\+Lib\+::\+One\+Factor\+Student\+Copula}}, and \mbox{\hyperlink{class_quant_lib_1_1_one_factor_student_gaussian_copula_a37ee83e624b800e8e8b4173999cf8c25}{Quant\+Lib\+::\+One\+Factor\+Student\+Gaussian\+Copula}}.

\Hypertarget{class_quant_lib_1_1_one_factor_copula_a1e25b1a30d63904c85de847228e51614}\index{QuantLib::OneFactorCopula@{QuantLib::OneFactorCopula}!integral@{integral}}
\index{integral@{integral}!QuantLib::OneFactorCopula@{QuantLib::OneFactorCopula}}
\doxysubsubsection{\texorpdfstring{integral()}{integral()}\hspace{0.1cm}{\footnotesize\ttfamily [1/3]}}
{\footnotesize\ttfamily \label{class_quant_lib_1_1_one_factor_copula_a1e25b1a30d63904c85de847228e51614} 
template$<$class F$>$ \\
\mbox{\hyperlink{class_quant_lib_1_1_distribution}{Distribution}} Quant\+Lib\+::\+One\+Factor\+Copula\+::integral (\begin{DoxyParamCaption}\item[{const F \&}]{f}{, }\item[{const std\+::vector$<$ \mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}} $>$ \&}]{nominals}{, }\item[{const std\+::vector$<$ \mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}} $>$ \&}]{probabilities}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}

Integral over the density $ \rho(m) $ of M and a multi-\/dimensional function $ f $ of conditional probabilities related to the input vector of probabilities p\+:

\[\int_{-\infty}^\infty\,dm\,\rho(m)\, f (\hat p_1, \hat p_2, \dots,
\hat p_N), \qquad
\hat p_i = F_Z \left( \frac{F_Y^{-1}(p_i)-a\,m}{\sqrt{1-a^2}}\right)
\] \Hypertarget{class_quant_lib_1_1_one_factor_copula_adc149153ced991bba4cb716c2bb42327}\index{QuantLib::OneFactorCopula@{QuantLib::OneFactorCopula}!integral@{integral}}
\index{integral@{integral}!QuantLib::OneFactorCopula@{QuantLib::OneFactorCopula}}
\doxysubsubsection{\texorpdfstring{integral()}{integral()}\hspace{0.1cm}{\footnotesize\ttfamily [2/3]}}
{\footnotesize\ttfamily \label{class_quant_lib_1_1_one_factor_copula_adc149153ced991bba4cb716c2bb42327} 
template$<$class F$>$ \\
\mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}} Quant\+Lib\+::\+One\+Factor\+Copula\+::integral (\begin{DoxyParamCaption}\item[{const F \&}]{f}{, }\item[{std\+::vector$<$ \mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}} $>$ \&}]{probabilities}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}

Integral over the density $ \rho(m) $ of M and a one-\/dimensional function $ f $ of conditional probabilities related to the input vector of probabilities p\+:

\[\int_{-\infty}^\infty\,dm\,\rho(m)\, f (\hat p_1, \hat p_2, \dots,
\hat p_N), \qquad
\hat p_i (m) = F_Z \left( \frac{F_Y^{-1}(p_i)-a\,m}{\sqrt{1-a^2}}
\right)
\] \Hypertarget{class_quant_lib_1_1_one_factor_copula_a477e0493a6093f497064855008c80dab}\index{QuantLib::OneFactorCopula@{QuantLib::OneFactorCopula}!integral@{integral}}
\index{integral@{integral}!QuantLib::OneFactorCopula@{QuantLib::OneFactorCopula}}
\doxysubsubsection{\texorpdfstring{integral()}{integral()}\hspace{0.1cm}{\footnotesize\ttfamily [3/3]}}
{\footnotesize\ttfamily \label{class_quant_lib_1_1_one_factor_copula_a477e0493a6093f497064855008c80dab} 
\mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}} Quant\+Lib\+::\+One\+Factor\+Copula\+::integral (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}}}]{p}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}

Integral over the density $ \rho(m) $ of M and the conditional probability related to p\+:

\[\int_{-\infty}^\infty\,dm\,\rho(m)\,
F_Z \left( \frac{F_Y^{-1}(p)-a\,m}{\sqrt{1-a^2}}\right)
\] \Hypertarget{class_quant_lib_1_1_one_factor_copula_a879f82a318fd4f0ec81c9577bcefbba6}\index{QuantLib::OneFactorCopula@{QuantLib::OneFactorCopula}!inverseCumulativeY@{inverseCumulativeY}}
\index{inverseCumulativeY@{inverseCumulativeY}!QuantLib::OneFactorCopula@{QuantLib::OneFactorCopula}}
\doxysubsubsection{\texorpdfstring{inverseCumulativeY()}{inverseCumulativeY()}}
{\footnotesize\ttfamily \label{class_quant_lib_1_1_one_factor_copula_a879f82a318fd4f0ec81c9577bcefbba6} 
\mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}} Quant\+Lib\+::\+One\+Factor\+Copula\+::inverse\+CumulativeY (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}}}]{p}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [virtual]}}



Inverse cumulative distribution of Y. 

This is the default implementation based on tabulated data. The table needs to be filled by derived classes. If analytic calculation is feasible, this method can also be overridden. 

Reimplemented in \mbox{\hyperlink{class_quant_lib_1_1_one_factor_gaussian_copula_ad43e089703440d99560fb6a9a9286f91}{Quant\+Lib\+::\+One\+Factor\+Gaussian\+Copula}}.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
ql/experimental/credit/\mbox{\hyperlink{onefactorcopula_8hpp}{onefactorcopula.\+hpp}}\item 
ql/experimental/credit/onefactorcopula.\+cpp\end{DoxyCompactItemize}
