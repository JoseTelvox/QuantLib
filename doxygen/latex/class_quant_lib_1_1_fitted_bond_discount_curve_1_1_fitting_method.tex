\doxysection{Quant\+Lib\+::Fitted\+Bond\+Discount\+Curve\+::Fitting\+Method Class Reference}
\hypertarget{class_quant_lib_1_1_fitted_bond_discount_curve_1_1_fitting_method}{}\label{class_quant_lib_1_1_fitted_bond_discount_curve_1_1_fitting_method}\index{QuantLib::FittedBondDiscountCurve::FittingMethod@{QuantLib::FittedBondDiscountCurve::FittingMethod}}


Base fitting method used to construct a fitted bond discount curve.  




{\ttfamily \#include $<$fittedbonddiscountcurve.\+hpp$>$}

Inheritance diagram for Quant\+Lib\+::Fitted\+Bond\+Discount\+Curve\+::Fitting\+Method\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=0.616062cm]{class_quant_lib_1_1_fitted_bond_discount_curve_1_1_fitting_method}
\end{center}
\end{figure}
\doxysubsubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{class_quant_lib_1_1_fitted_bond_discount_curve_1_1_fitting_method_1_1_fitting_cost}{Fitting\+Cost}}
\end{DoxyCompactItemize}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{class_quant_lib_1_1_fitted_bond_discount_curve_1_1_fitting_method_abf97c55767dd73cd02e5541c930617f6}\label{class_quant_lib_1_1_fitted_bond_discount_curve_1_1_fitting_method_abf97c55767dd73cd02e5541c930617f6} 
virtual \mbox{\hyperlink{namespace_quant_lib_af4cc4ef40b52c17cc455ead2a97aedb3}{Size}} {\bfseries size} () const =0
\begin{DoxyCompactList}\small\item\em total number of coefficients to fit/solve for \end{DoxyCompactList}\item 
\Hypertarget{class_quant_lib_1_1_fitted_bond_discount_curve_1_1_fitting_method_af90ece7006cf117bf516ad340d7153b4}\label{class_quant_lib_1_1_fitted_bond_discount_curve_1_1_fitting_method_af90ece7006cf117bf516ad340d7153b4} 
\mbox{\hyperlink{class_quant_lib_1_1_array}{Array}} {\bfseries solution} () const
\begin{DoxyCompactList}\small\item\em output array of results of optimization problem \end{DoxyCompactList}\item 
\Hypertarget{class_quant_lib_1_1_fitted_bond_discount_curve_1_1_fitting_method_a5db7d205e64981fd89266e5c057053ba}\label{class_quant_lib_1_1_fitted_bond_discount_curve_1_1_fitting_method_a5db7d205e64981fd89266e5c057053ba} 
\mbox{\hyperlink{namespace_quant_lib_a8ac1a45a37d8d3dda438a2e59e222620}{Integer}} {\bfseries number\+Of\+Iterations} () const
\begin{DoxyCompactList}\small\item\em final number of iterations used in the optimization problem \end{DoxyCompactList}\item 
\Hypertarget{class_quant_lib_1_1_fitted_bond_discount_curve_1_1_fitting_method_a4e7dd053044cfee0a52a8599b39d251a}\label{class_quant_lib_1_1_fitted_bond_discount_curve_1_1_fitting_method_a4e7dd053044cfee0a52a8599b39d251a} 
\mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}} {\bfseries minimum\+Cost\+Value} () const
\begin{DoxyCompactList}\small\item\em final value of cost function after optimization \end{DoxyCompactList}\item 
\Hypertarget{class_quant_lib_1_1_fitted_bond_discount_curve_1_1_fitting_method_a93d0ef859695a2125262d5493e5b8dc1}\label{class_quant_lib_1_1_fitted_bond_discount_curve_1_1_fitting_method_a93d0ef859695a2125262d5493e5b8dc1} 
End\+Criteria\+::\+Type {\bfseries error\+Code} () const
\begin{DoxyCompactList}\small\item\em error code of the optimization \end{DoxyCompactList}\item 
virtual std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{class_quant_lib_1_1_fitted_bond_discount_curve_1_1_fitting_method}{Fitting\+Method}} $>$ \mbox{\hyperlink{class_quant_lib_1_1_fitted_bond_discount_curve_1_1_fitting_method_a70b66bfb9823d64c97f0510231476223}{clone}} () const =0
\begin{DoxyCompactList}\small\item\em clone of the current object \end{DoxyCompactList}\item 
\Hypertarget{class_quant_lib_1_1_fitted_bond_discount_curve_1_1_fitting_method_a1a70aa58b58d49e27750d684c4d3ed84}\label{class_quant_lib_1_1_fitted_bond_discount_curve_1_1_fitting_method_a1a70aa58b58d49e27750d684c4d3ed84} 
bool {\bfseries constrain\+At\+Zero} () const
\begin{DoxyCompactList}\small\item\em return whether there is a constraint at zero \end{DoxyCompactList}\item 
\Hypertarget{class_quant_lib_1_1_fitted_bond_discount_curve_1_1_fitting_method_afbfb66bd76f54a51d098f1b9b4a41b72}\label{class_quant_lib_1_1_fitted_bond_discount_curve_1_1_fitting_method_afbfb66bd76f54a51d098f1b9b4a41b72} 
\mbox{\hyperlink{class_quant_lib_1_1_array}{Array}} {\bfseries weights} () const
\begin{DoxyCompactList}\small\item\em return weights being used \end{DoxyCompactList}\item 
\Hypertarget{class_quant_lib_1_1_fitted_bond_discount_curve_1_1_fitting_method_af9fc0011cee001b454cd46e9c6417e86}\label{class_quant_lib_1_1_fitted_bond_discount_curve_1_1_fitting_method_af9fc0011cee001b454cd46e9c6417e86} 
\mbox{\hyperlink{class_quant_lib_1_1_array}{Array}} {\bfseries l2} () const
\begin{DoxyCompactList}\small\item\em return l2 penalties being used \end{DoxyCompactList}\item 
\Hypertarget{class_quant_lib_1_1_fitted_bond_discount_curve_1_1_fitting_method_af13a932e2c10a94fbecaa422aa247448}\label{class_quant_lib_1_1_fitted_bond_discount_curve_1_1_fitting_method_af13a932e2c10a94fbecaa422aa247448} 
ext\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{class_quant_lib_1_1_optimization_method}{Optimization\+Method}} $>$ {\bfseries optimization\+Method} () const
\begin{DoxyCompactList}\small\item\em return optimization method being used \end{DoxyCompactList}\item 
\Hypertarget{class_quant_lib_1_1_fitted_bond_discount_curve_1_1_fitting_method_a2c8e4660b600fcd54b9d0ea84dbb9beb}\label{class_quant_lib_1_1_fitted_bond_discount_curve_1_1_fitting_method_a2c8e4660b600fcd54b9d0ea84dbb9beb} 
const \mbox{\hyperlink{class_quant_lib_1_1_constraint}{Constraint}} \& {\bfseries constraint} () const
\begin{DoxyCompactList}\small\item\em return optimization contraint \end{DoxyCompactList}\item 
\Hypertarget{class_quant_lib_1_1_fitted_bond_discount_curve_1_1_fitting_method_a82287eb87d77404b5a674e657961c363}\label{class_quant_lib_1_1_fitted_bond_discount_curve_1_1_fitting_method_a82287eb87d77404b5a674e657961c363} 
\mbox{\hyperlink{namespace_quant_lib_a05e8e288a4bdedfe5b4e16d8cec14f1c}{Discount\+Factor}} {\bfseries discount} (const \mbox{\hyperlink{class_quant_lib_1_1_array}{Array}} \&x, \mbox{\hyperlink{namespace_quant_lib_a4f78b18a4dd1a979eb78b4e1e8ac1503}{Time}} t) const
\begin{DoxyCompactList}\small\item\em open discount\+Function to public \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{class_quant_lib_1_1_fitted_bond_discount_curve_1_1_fitting_method_ac60d03d7e7d3107f78eccac5fc7cfeb7}\label{class_quant_lib_1_1_fitted_bond_discount_curve_1_1_fitting_method_ac60d03d7e7d3107f78eccac5fc7cfeb7} 
{\bfseries Fitting\+Method} (bool \mbox{\hyperlink{class_quant_lib_1_1_fitted_bond_discount_curve_1_1_fitting_method_a1a70aa58b58d49e27750d684c4d3ed84}{constrain\+At\+Zero}}=true, const \mbox{\hyperlink{class_quant_lib_1_1_array}{Array}} \&\mbox{\hyperlink{class_quant_lib_1_1_fitted_bond_discount_curve_1_1_fitting_method_afbfb66bd76f54a51d098f1b9b4a41b72}{weights}}=\mbox{\hyperlink{class_quant_lib_1_1_array}{Array}}(), ext\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{class_quant_lib_1_1_optimization_method}{Optimization\+Method}} $>$ \mbox{\hyperlink{class_quant_lib_1_1_fitted_bond_discount_curve_1_1_fitting_method_af13a932e2c10a94fbecaa422aa247448}{optimization\+Method}}=ext\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{class_quant_lib_1_1_optimization_method}{Optimization\+Method}} $>$(), \mbox{\hyperlink{class_quant_lib_1_1_array}{Array}} \mbox{\hyperlink{class_quant_lib_1_1_fitted_bond_discount_curve_1_1_fitting_method_af9fc0011cee001b454cd46e9c6417e86}{l2}}=\mbox{\hyperlink{class_quant_lib_1_1_array}{Array}}(), \mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}} min\+Cutoff\+Time=0.\+0, \mbox{\hyperlink{namespace_quant_lib_a372ac5c1a422a6b276fe0552d4d83f50}{Real}} max\+Cutoff\+Time=\mbox{\hyperlink{group__limit_macros_ga31675a375a563ed7a1bba05c664489af}{QL\+\_\+\+MAX\+\_\+\+REAL}}, \mbox{\hyperlink{class_quant_lib_1_1_constraint}{Constraint}} \mbox{\hyperlink{class_quant_lib_1_1_fitted_bond_discount_curve_1_1_fitting_method_a2c8e4660b600fcd54b9d0ea84dbb9beb}{constraint}}=\mbox{\hyperlink{class_quant_lib_1_1_no_constraint}{No\+Constraint}}())
\begin{DoxyCompactList}\small\item\em constructors \end{DoxyCompactList}\item 
virtual void \mbox{\hyperlink{class_quant_lib_1_1_fitted_bond_discount_curve_1_1_fitting_method_a1a95e76182041bc74d3e9d81c6c22930}{init}} ()
\begin{DoxyCompactList}\small\item\em rerun every time instruments/reference\+Date changes \end{DoxyCompactList}\item 
\Hypertarget{class_quant_lib_1_1_fitted_bond_discount_curve_1_1_fitting_method_ac9a84e710d167996e6ab70d3513480f2}\label{class_quant_lib_1_1_fitted_bond_discount_curve_1_1_fitting_method_ac9a84e710d167996e6ab70d3513480f2} 
virtual \mbox{\hyperlink{namespace_quant_lib_a05e8e288a4bdedfe5b4e16d8cec14f1c}{Discount\+Factor}} {\bfseries discount\+Function} (const \mbox{\hyperlink{class_quant_lib_1_1_array}{Array}} \&x, \mbox{\hyperlink{namespace_quant_lib_a4f78b18a4dd1a979eb78b4e1e8ac1503}{Time}} t) const =0
\begin{DoxyCompactList}\small\item\em discount function called by \doxylink{class_quant_lib_1_1_fitted_bond_discount_curve}{Fitted\+Bond\+Discount\+Curve} \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{class_quant_lib_1_1_fitted_bond_discount_curve_1_1_fitting_method_a2c0780f412eb30de6bda3dae5bfa931b}\label{class_quant_lib_1_1_fitted_bond_discount_curve_1_1_fitting_method_a2c0780f412eb30de6bda3dae5bfa931b} 
bool {\bfseries constrain\+At\+Zero\+\_\+}
\begin{DoxyCompactList}\small\item\em constrains discount function to unity at $ T=0 $, if true \end{DoxyCompactList}\item 
\Hypertarget{class_quant_lib_1_1_fitted_bond_discount_curve_1_1_fitting_method_a3dee794ba5dac372f875b62d3b6e5c43}\label{class_quant_lib_1_1_fitted_bond_discount_curve_1_1_fitting_method_a3dee794ba5dac372f875b62d3b6e5c43} 
\mbox{\hyperlink{class_quant_lib_1_1_fitted_bond_discount_curve}{Fitted\+Bond\+Discount\+Curve}} \texorpdfstring{$\ast$}{*} {\bfseries curve\+\_\+}
\begin{DoxyCompactList}\small\item\em internal reference to the \doxylink{class_quant_lib_1_1_fitted_bond_discount_curve}{Fitted\+Bond\+Discount\+Curve} instance \end{DoxyCompactList}\item 
\Hypertarget{class_quant_lib_1_1_fitted_bond_discount_curve_1_1_fitting_method_af3084426c6057ea8302006cfb22c3e70}\label{class_quant_lib_1_1_fitted_bond_discount_curve_1_1_fitting_method_af3084426c6057ea8302006cfb22c3e70} 
\mbox{\hyperlink{class_quant_lib_1_1_array}{Array}} {\bfseries solution\+\_\+}
\begin{DoxyCompactList}\small\item\em solution array found from optimization, set in calculate() \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_quant_lib_1_1_array}{Array}} \mbox{\hyperlink{class_quant_lib_1_1_fitted_bond_discount_curve_1_1_fitting_method_a4bb64cb440e5acd113dc6b997e2babcf}{guess\+Solution\+\_\+}}
\begin{DoxyCompactList}\small\item\em optional guess solution to be passed into constructor. \end{DoxyCompactList}\item 
\Hypertarget{class_quant_lib_1_1_fitted_bond_discount_curve_1_1_fitting_method_ae85a63da8f68ece27bef34f05660966b}\label{class_quant_lib_1_1_fitted_bond_discount_curve_1_1_fitting_method_ae85a63da8f68ece27bef34f05660966b} 
ext\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{class_quant_lib_1_1_fitted_bond_discount_curve_1_1_fitting_method_1_1_fitting_cost}{Fitting\+Cost}} $>$ {\bfseries cost\+Function\+\_\+}
\begin{DoxyCompactList}\small\item\em base class sets this cost function used in the optimization routine \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Friends}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{class_quant_lib_1_1_fitted_bond_discount_curve_1_1_fitting_method_aed718c4358fb9121b3421566c9e0be55}\label{class_quant_lib_1_1_fitted_bond_discount_curve_1_1_fitting_method_aed718c4358fb9121b3421566c9e0be55} 
class {\bfseries Fitted\+Bond\+Discount\+Curve}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Base fitting method used to construct a fitted bond discount curve. 

This base class provides the specific methodology/strategy used to construct a \doxylink{class_quant_lib_1_1_fitted_bond_discount_curve}{Fitted\+Bond\+Discount\+Curve}. Derived classes need only define the virtual function \doxylink{class_quant_lib_1_1_fitted_bond_discount_curve_1_1_fitting_method_ac9a84e710d167996e6ab70d3513480f2}{discount\+Function()} based on the particular fitting method to be implemented, as well as \doxylink{class_quant_lib_1_1_fitted_bond_discount_curve_1_1_fitting_method_abf97c55767dd73cd02e5541c930617f6}{size()}, the number of variables to be solved for/optimized. The generic fitting methodology implemented here can be termed nonlinear, in contrast to (typically faster, computationally) linear fitting method.

Optional parameters for \doxylink{class_quant_lib_1_1_fitted_bond_discount_curve_1_1_fitting_method}{Fitting\+Method} include an \doxylink{class_quant_lib_1_1_array}{Array} of weights, which will be used as weights to each bond. If not given or empty, then the bonds will be weighted by inverse duration

An optional \doxylink{class_quant_lib_1_1_array}{Array} may be provided as an L2 regularizor in this case a L2 (gaussian) penalty is applied to each parameter starting from the initial guess. This is the same as giving a Gaussian prior on the parameters

\begin{DoxyRefDesc}{Todo}
\item[\mbox{\hyperlink{todo__todo000075}{Todo}}]derive the special-\/case class Linear\+Fitting\+Methods from \doxylink{class_quant_lib_1_1_fitted_bond_discount_curve_1_1_fitting_method}{Fitting\+Method}. A linear fitting to a set of basis functions $ b_i(t) $ is any fitting of the form \end{DoxyRefDesc}
\[      d(t) = \sum_{i=0} c_i b_i(t)
\] i.\+e., linear in the unknown coefficients  $ c_i
$. Such a fitting can be reduced to a linear algebra problem $ Ax = b $, and for large numbers of bonds, would typically be much faster computationally than the generic non-\/linear fitting method.

\begin{DoxyWarning}{Warning}
some parameters to the \doxylink{class_quant_lib_1_1_simplex}{Simplex} optimization method may need to be tweaked internally to the class, depending on the fitting method used, in order to get proper/reasonable/faster convergence. 
\end{DoxyWarning}


\doxysubsection{Member Function Documentation}
\Hypertarget{class_quant_lib_1_1_fitted_bond_discount_curve_1_1_fitting_method_a70b66bfb9823d64c97f0510231476223}\index{QuantLib::FittedBondDiscountCurve::FittingMethod@{QuantLib::FittedBondDiscountCurve::FittingMethod}!clone@{clone}}
\index{clone@{clone}!QuantLib::FittedBondDiscountCurve::FittingMethod@{QuantLib::FittedBondDiscountCurve::FittingMethod}}
\doxysubsubsection{\texorpdfstring{clone()}{clone()}}
{\footnotesize\ttfamily \label{class_quant_lib_1_1_fitted_bond_discount_curve_1_1_fitting_method_a70b66bfb9823d64c97f0510231476223} 
virtual std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{class_quant_lib_1_1_fitted_bond_discount_curve_1_1_fitting_method}{Fitting\+Method}} $>$ Quant\+Lib\+::\+Fitted\+Bond\+Discount\+Curve\+::\+Fitting\+Method\+::clone (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [pure virtual]}}



clone of the current object 



Implemented in \mbox{\hyperlink{class_quant_lib_1_1_cubic_b_splines_fitting_ace4405e8a44e01e12daf86e9d314d611}{Quant\+Lib\+::\+Cubic\+BSplines\+Fitting}}, \mbox{\hyperlink{class_quant_lib_1_1_exponential_splines_fitting_a081886f0a8c2efa30089955bd6e8cc59}{Quant\+Lib\+::\+Exponential\+Splines\+Fitting}}, \mbox{\hyperlink{class_quant_lib_1_1_nelson_siegel_fitting_ab08f15a92281b758c3289002106cc3df}{Quant\+Lib\+::\+Nelson\+Siegel\+Fitting}}, \mbox{\hyperlink{class_quant_lib_1_1_simple_polynomial_fitting_a5029f2d4df8918d8b4d481792d2ba80d}{Quant\+Lib\+::\+Simple\+Polynomial\+Fitting}}, \mbox{\hyperlink{class_quant_lib_1_1_spread_fitting_method_a0ef58a1da2d2072879bc0583b2ab9ded}{Quant\+Lib\+::\+Spread\+Fitting\+Method}}, and \mbox{\hyperlink{class_quant_lib_1_1_svensson_fitting_a87dc70ef231f87277c1cfe9a658e3022}{Quant\+Lib\+::\+Svensson\+Fitting}}.

\Hypertarget{class_quant_lib_1_1_fitted_bond_discount_curve_1_1_fitting_method_a1a95e76182041bc74d3e9d81c6c22930}\index{QuantLib::FittedBondDiscountCurve::FittingMethod@{QuantLib::FittedBondDiscountCurve::FittingMethod}!init@{init}}
\index{init@{init}!QuantLib::FittedBondDiscountCurve::FittingMethod@{QuantLib::FittedBondDiscountCurve::FittingMethod}}
\doxysubsubsection{\texorpdfstring{init()}{init()}}
{\footnotesize\ttfamily \label{class_quant_lib_1_1_fitted_bond_discount_curve_1_1_fitting_method_a1a95e76182041bc74d3e9d81c6c22930} 
void Quant\+Lib\+::\+Fitted\+Bond\+Discount\+Curve\+::\+Fitting\+Method\+::init (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}



rerun every time instruments/reference\+Date changes 



Reimplemented in \mbox{\hyperlink{class_quant_lib_1_1_spread_fitting_method_a1a99eab31f146e23401298f5d2aa95aa}{Quant\+Lib\+::\+Spread\+Fitting\+Method}}.



\doxysubsection{Member Data Documentation}
\Hypertarget{class_quant_lib_1_1_fitted_bond_discount_curve_1_1_fitting_method_a4bb64cb440e5acd113dc6b997e2babcf}\index{QuantLib::FittedBondDiscountCurve::FittingMethod@{QuantLib::FittedBondDiscountCurve::FittingMethod}!guessSolution\_@{guessSolution\_}}
\index{guessSolution\_@{guessSolution\_}!QuantLib::FittedBondDiscountCurve::FittingMethod@{QuantLib::FittedBondDiscountCurve::FittingMethod}}
\doxysubsubsection{\texorpdfstring{guessSolution\_}{guessSolution\_}}
{\footnotesize\ttfamily \label{class_quant_lib_1_1_fitted_bond_discount_curve_1_1_fitting_method_a4bb64cb440e5acd113dc6b997e2babcf} 
\mbox{\hyperlink{class_quant_lib_1_1_array}{Array}} Quant\+Lib\+::\+Fitted\+Bond\+Discount\+Curve\+::\+Fitting\+Method\+::guess\+Solution\+\_\+\hspace{0.3cm}{\ttfamily [protected]}}



optional guess solution to be passed into constructor. 

The idea is to use a previous solution as a guess solution to the discount curve, in an attempt to speed up calculations. 

The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
ql/termstructures/yield/\mbox{\hyperlink{fittedbonddiscountcurve_8hpp}{fittedbonddiscountcurve.\+hpp}}\item 
ql/termstructures/yield/fittedbonddiscountcurve.\+cpp\end{DoxyCompactItemize}
